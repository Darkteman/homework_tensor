# Тестовое задание на должность "программист-тестировщик" в компанию Тензор

## Технологический стек
[![Python](https://img.shields.io/badge/-Python-464646?style=flat&logo=Python&logoColor=56C0C0&color=008080)](https://www.python.org/)
[![Selenium](https://img.shields.io/badge/-Selenium-464646?style=flat&logo=selenium&logoColor=56C0C0&color=008080)](https://www.selenium.dev/)
[![Pytest](https://img.shields.io/badge/-Pytest-464646?style=flat&logo=Pytestk&logoColor=56C0C0&color=008080)](https://docs.pytest.org/en/7.3.x/)
[![Loguru](https://img.shields.io/badge/-Loguru-464646?style=flat&logo=Loguru&logoColor=56C0C0&color=008080)](https://loguru.readthedocs.io/en/stable/api/logger.html)

Проект состоит из 2ух заданий по автоматизации тестирования.  
В работе использовался Python 3.10 в совокупности с Selenuim WebDriver.   
Тесты написаны с помощью pytest, логирование осуществляется через библиотеку loguru.  
В проекте реализован паттерн проектирования - Page Object Model (POM).  
При запуске автотестов использовался веб-браузер Chrome и операционная система Ubuntu 22.04.    


## Запуск проекта на локальном устройстве
Команды описанные ниже актуальны для Linux, в других ОС команды могут незначительно отличаться.
* Клонируйте репозиторий:
```bash
git clone https://github.com/Darkteman/homework_tensor.git
```
* Перейдите в директорию проекта:
```bash
cd homework_tensor/
```  
* Создайте виртуальное окружение:
```bash
python3 -m venv venv
```  
* Запустите виртуальное окружение:
```bash
source venv/bin/activate
```
* Установите зависимости:
```bash
pip install -r requirements.txt
```
* Запустите тесты:
```bash
pytest
```

### Сценарий первого автотеста:
1.  Зайти на https://ya.ru/
2.  Проверить наличие поля поиска
3.  Ввести в поиск Тензор
4.  Проверить, что появилась таблица с подсказками (suggest) 
5.  Нажать enter
6.  Проверить, что появилась страница результатов поиска
7.  Проверить, что 1ая ссылка ведет на сайт tensor.ru

### Сценарий второго автотеста:
1.  Зайти на https://ya.ru/
2.  Проверить, что кнопка меню присутствует на странице
3.  Открыть меню, выбрать “Картинки”
4.  Проверить, что перешли на url https://yandex.ru/images/
5.  Открыть первую категорию
6.  Проверить, что название категории отображается в поле поиска
7.  Открыть 1 картинку
8.  Проверить, что картинка открылась
9.  Нажать кнопку вперед
10. Проверить, что картинка сменилась
11. Нажать назад
12. Проверить, что картинка осталась из шага 8

### Примечания:
1. В проекте не требуется устанавливать веб. драйвер для управления браузером. Этот процесс автоматизирован с помощью библиотеки webdriver-manager.
2. Логи пишутся в директорию services/logging в файл debag.log. При перезаполнении файла (свыше 1 МБ) создается новый, предыдущий сжимается в .zip формат. Изменить настройки можно в файле log_conf.
3. Процесс анализа картинок реализован с помощью библиотеки Pillow, изображения по-пиксельно сравниваются между собой. Предварительно картинки скачиваются в корневую директорию проекта.
4. В сценариях тестового задания зачастую требуется проверять, что определенный объект отобразился на странице. С целью оптимизации кода любой элемент использующийся в тесте автоматически проверяется на существование с помощью функции "get_visible_object". Если объект на странице не появился, возникает исключение с текстом ошибки соответствующим данному элементу. Меньше кода, больше проверок. DRY и KISS в действии.   
5. При частых однотипных запросах на страницах Яндекса начинают вылетать "капчи" (SmartCaptcha), в которых нужно решать задания по вводу текста с картинки. Яндекс проверяет, что запросы делает не робот. Но в данном случае браузером действительно управляет не человек, поэтому приходится как-то выкручиваться {веселый смайл}. Для того чтобы успеть ввести "капчу", можно поставить в начале каждого теста time.sleep(), например на 20 сек. Либо увеличить константу LAG_TIME_VISIBLE_OBJECT в модуле pages.base_page.py, она отвечает за время ожидания перед прогрузкой требуемого элемента страницы. На перспективу можно продумать обход данной проблемы с помощью передачи кеша из успешной сессии в тестовую. Либо воспользоваться сторонними сервисами по решению "капч".

Успехов!

### Авторы:
[Пищулин А.А.](https://github.com/darkteman) - выполнил задание,  
[Тензор](https://tensor.ru/) - придумал задание.
